const margin=72,endMargin=760,width=451;let verticalOffset=72,fontSize=11;const lineHeight=1.4*fontSize,logoImgPath="assets/logo1_dark_print.png";let logoImgDataUrl,createPDF=function(){let e=$(".question"),t=$(".answer"),i=$("#yourName")[0].value,a=$("#doctorName")[0].value,n=$(".healthcareAgentInfo"),l=formatUserInputData(e,t),s=new jsPDF("p","pt","a4");s.setFont("georgia","regular"),s.setFontSize(fontSize);s.addImage(logoImgDataUrl,"PNG",227.5,72,140,30),verticalOffset+=30,skipLine(3);let r="Date: "+getDate();s.text(r,72,verticalOffset),skipLine(2);let o="Dear "+a+",";s.text(o,72,verticalOffset),skipLine(2);let f="The following are answers to the questions provided by pallidocs.com regarding "+i+"'s goals and wishes during their journey with a serious illness.",_=s.splitTextToSize(f,451);for(let e in _)s.text(_[e],72,verticalOffset),skipLine();skipLine(2),s.setFontStyle("bold").text("Healthcare Agent:",72,verticalOffset),skipLine(),s.setFontStyle("regular");for(let e=0;e<n.length;e++){let t=n[e],i=t.id+": "+t.value;s.text(i,72,verticalOffset),skipLine()}skipLine();let c=s.setFontStyle("italic").setFontSize(9).splitTextToSize("This Health Care Agent shall take effect in the event that a determination is made by my doctor that I lack the capacity to make or to communicate my own health care decisions.",451);s.text(c,72,verticalOffset),skipLine(4),s.setFontSize(fontSize);for(let e in l){const t="italic",i="regular";let a;a=s.setFontStyle(t).splitTextToSize(l[e].question,451);for(let e in a)verticalOffset<760||e==a.length-1&&a.length>1?s.text(a[e],72,verticalOffset):(verticalOffset=72,s.addPage(),s.text(a[e],72,verticalOffset)),e==a.length-1?skipLine(2):skipLine();a=s.setFontStyle(i).splitTextToSize(l[e].answer,451);for(let e in a){let t=e==a.length-1&&a.length>1;verticalOffset<760||t?s.text(a[e],72,verticalOffset):(verticalOffset=72,s.addPage(),s.text(a[e],72,verticalOffset)),e==a.length-1?skipLine(4):skipLine()}}skipLine(4),verticalOffset>400&&(s.addPage(),verticalOffset=72),s.text("Please upload this letter into my medical records to have as a guide throughout my journey.",72,verticalOffset),skipLine(2),s.text("Sincerely,",72,verticalOffset),skipLine(),s.text(i,72,verticalOffset),skipLine(3),s.text("Signature ______________________________________          Date _________________________",72,verticalOffset),s.save("PallidocsForms.pdf")};function getDate(){let e=new Date,t=e.getDate(),i=e.getMonth()+1;return t<10&&(t="0"+t),i<10&&(i="0"+i),i+"/"+t+"/"+e.getFullYear()}function skipLine(e){verticalOffset+=lineHeight*(e||1)}function createLogoDataUrl(e){let t=new Image;t.crossOrigin="Anonymous",t.onload=function(){let e=document.createElement("CANVAS"),t=e.getContext("2d");e.height=this.naturalHeight,e.width=this.naturalWidth,t.drawImage(this,0,0),logoImgDataUrl=e.toDataURL()},t.src=e}function formatUserInputData(e,t){let i=[],a=1;for(let n in e){let l={question:a+". "+e[n].innerText,answer:t[n].value};if(a++,t[n].value||(l.answer="No answer"),!e[n].innerText)break;i.push(l)}return i}$(document).ready(()=>{createLogoDataUrl(logoImgPath)});