let margin=72,endMargin=760,width=595-2*margin,verticalOffset=margin,fontSize=11,lineHeight=1.4*fontSize,createPDF=function(){let e=$(".question"),t=$(".answer"),i=$("#yourName")[0].value,a=$(".healthcareAgentInfo"),n=[],r=1;for(let i in e){let a={question:r+". "+e[i].textContent,answer:t[i].value};if(r++,t[i].value||(a.answer="No answer"),!e[i].textContent)break;n.push(a)}let _=new jsPDF("p","pt","a4");_.setFont("georgia","regular"),_.setFontSize(fontSize);_.addImage(logoImgDataURL,"PNG",margin,margin,146,25),verticalOffset+=25,skipLine(3);let l="Date: "+getDate();_.text(l,margin,verticalOffset),skipLine(2);_.text("Dear Doctor _________________________________,",margin,verticalOffset),skipLine(2);let s="The following are answers to the questions provided by pallidocs.com regarding "+i+"'s goals and wishes during their journey with a serious illness.",o=_.splitTextToSize(s,width);for(let e in o)_.text(o[e],margin,verticalOffset),skipLine();skipLine(2),_.setFontStyle("bold").text("Healthcare Agent:",margin,verticalOffset),skipLine(),_.setFontStyle("regular");for(let e=0;e<a.length;e++){let t=a[e],i=t.id+": "+t.value;_.text(i,margin,verticalOffset),skipLine()}skipLine();let f=_.setFontStyle("italic").setFontSize(9).splitTextToSize("This Health Care Agent shall take effect in the event that a determination is made by my doctor that I lack the capacity to make or to communicate my own health care decisions.",width);_.text(f,margin,verticalOffset),skipLine(4),_.setFontSize(fontSize);for(let e in n){let t,i="italic",a="regular";t=_.setFontStyle(i).splitTextToSize(n[e].question,width);for(let e in t)verticalOffset<endMargin||e==t.length-1&&t.length>1?_.text(t[e],margin,verticalOffset):(verticalOffset=margin,_.addPage(),_.text(t[e],margin,verticalOffset)),e==t.length-1?skipLine(2):skipLine();t=_.setFontStyle(a).splitTextToSize(n[e].answer,width);for(let e in t)verticalOffset<endMargin||e==t.length-1&&t.length>1?_.text(t[e],margin,verticalOffset):(verticalOffset=margin,_.addPage(),_.text(t[e],margin,verticalOffset)),e==t.length-1?skipLine(4):skipLine()}skipLine(4),verticalOffset>400&&(_.addPage(),verticalOffset=margin),_.text("Please upload this letter into my medical records to have as a guide throughout my journey.",margin,verticalOffset),skipLine(2),_.text("Sincerely,",margin,verticalOffset),skipLine(),_.text(i,margin,verticalOffset),skipLine(3),_.text("Signature ______________________________________          Date _________________________",margin,verticalOffset),_.save("PallidocsForms.pdf")};function getDate(){let e=new Date,t=e.getDate(),i=e.getMonth()+1;return t<10&&(t="0"+t),i<10&&(i="0"+i),i+"/"+t+"/"+e.getFullYear()}function skipLine(e){verticalOffset+=lineHeight*(e||1)}