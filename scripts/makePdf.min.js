let margin=72,endMargin=760,width=595-2*margin,verticalOffset=margin,fontSize=11,lineHeight=1.4*fontSize,createPDF=function(){let e=$(".question"),t=$(".answer"),i=$("#yourName")[0].value,a=$("#doctorName")[0].value,n=$(".healthcareAgentInfo"),r=[],l=1;for(let i in e){let a={question:l+". "+e[i].textContent,answer:t[i].value};if(l++,t[i].value||(a.answer="No answer"),!e[i].textContent)break;r.push(a)}let s=new jsPDF("p","pt","a4");s.setFont("georgia","regular"),s.setFontSize(fontSize);let o=margin;s.addImage(logoImgDataURL,"PNG",227.5,o,140,30),verticalOffset+=30,skipLine(3);let f="Date: "+getDate();s.text(f,margin,verticalOffset),skipLine(2);let _="Dear "+a+",";s.text(_,margin,verticalOffset),skipLine(2);let g="The following are answers to the questions provided by pallidocs.com regarding "+i+"'s goals and wishes during their journey with a serious illness.",c=s.splitTextToSize(g,width);for(let e in c)s.text(c[e],margin,verticalOffset),skipLine();skipLine(2),s.setFontStyle("bold").text("Healthcare Agent:",margin,verticalOffset),skipLine(),s.setFontStyle("regular");for(let e=0;e<n.length;e++){let t=n[e],i=t.id+": "+t.value;s.text(i,margin,verticalOffset),skipLine()}skipLine();let h=s.setFontStyle("italic").setFontSize(9).splitTextToSize("This Health Care Agent shall take effect in the event that a determination is made by my doctor that I lack the capacity to make or to communicate my own health care decisions.",width);s.text(h,margin,verticalOffset),skipLine(4),s.setFontSize(fontSize);for(let e in r){let t,i="italic",a="regular";t=s.setFontStyle(i).splitTextToSize(r[e].question,width);for(let e in t)verticalOffset<endMargin||e==t.length-1&&t.length>1?s.text(t[e],margin,verticalOffset):(verticalOffset=margin,s.addPage(),s.text(t[e],margin,verticalOffset)),e==t.length-1?skipLine(2):skipLine();t=s.setFontStyle(a).splitTextToSize(r[e].answer,width);for(let e in t)verticalOffset<endMargin||e==t.length-1&&t.length>1?s.text(t[e],margin,verticalOffset):(verticalOffset=margin,s.addPage(),s.text(t[e],margin,verticalOffset)),e==t.length-1?skipLine(4):skipLine()}skipLine(4),verticalOffset>400&&(s.addPage(),verticalOffset=margin),s.text("Please upload this letter into my medical records to have as a guide throughout my journey.",margin,verticalOffset),skipLine(2),s.text("Sincerely,",margin,verticalOffset),skipLine(),s.text(i,margin,verticalOffset),skipLine(3),s.text("Signature ______________________________________          Date _________________________",margin,verticalOffset),s.save("PallidocsForms.pdf")};function getDate(){let e=new Date,t=e.getDate(),i=e.getMonth()+1;return t<10&&(t="0"+t),i<10&&(i="0"+i),i+"/"+t+"/"+e.getFullYear()}function skipLine(e){verticalOffset+=lineHeight*(e||1)}